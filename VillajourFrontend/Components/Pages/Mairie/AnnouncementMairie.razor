@page "/AnnouncementMairie"
@using VillajourFrontend.Dto.Announcement
@using Radzen
@using Radzen.Blazor

<div class="announcementTitle">
    <h1>Vos annonces</h1>
    <RadzenButton Text="Ajouter une annonce" Icon="add_circle_outline" ButtonStyle="ButtonStyle.Primary" Click="@OnAddNewAnnouncement" />
</div>

@if (announcement == null)
{
    <p>Aucune annonce trouvé !</p>
}
else if (!announcement.Any())
{
    <p>Vous n'avez aucun annonce.</p>
}
else
{
    <div class="container mt-4 mb-4">
        <div class="row">
            <div class="col-md-12">
                <RadzenDataList Data="@announcement" TItem="AnnouncementDto" AllowPaging="true" PageSize="2" PagerHorizontalAlign="HorizontalAlign.Center" ShowPagingSummary="false">
                    <Template Context="announcementEnt">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <h4>@announcementEnt.Title</h4>
                                <p>@announcementEnt.Description</p>
                                <p><em>@announcementEnt.Date.ToShortDateString()</em></p>
                            </div>
                            <div class="col-md-3" style="display: flex; justify-content: center; align-items: center;">
                                <RadzenButton Text="Modifier" Click="@(() => OnUpdateAnnouncement(announcementEnt.Id))" Style="width: 100%" class="rz-background-color-warning-light" />
                            </div>
                            <div class="col-md-3" style="display: flex; justify-content: center; align-items: center;">
                                <RadzenButton Text="Supprimer" Click="@(() => OnDeleteAnnouncement(announcementEnt.Id))" Style="width: 100%" class="rz-background-color-danger-light" />
                            </div>
                        </div>
                    </Template>
                </RadzenDataList>
            </div>
        </div>
    </div>
}
